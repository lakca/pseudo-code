<html>

<head>
</head>

<body>
  <div>
    #Macros
    `macro_rules!` [IDENTIFIER] [MacroRulesDefinition]

    #MacroRulesDefinition
    `{` [MacroRules] `}` | `(` [MacroRules] `)``;` | `[` [MacroRules] `]``;`

    #MacroRules
    [MacroRule] "("`;`[MacroRule]")""*" `;`"?"

    #MacroRule
    [MacroMatcher] `=>` [MacroTranscriber]

    #MacroMatcher
    `(` [MacroMatches] `)` | `[` [MacroMatches] `]` | `{` [MacroMatches] `}`

    #MacroMatches
    [MacroMatch] "("`,`[MacroMatch]")""*"

    #MacroMatch
    /可以直接比对纯字面量/
    Exclude<[Token], `$` | [DELIMITER]>
      /指定每段的匹配模式，并捕获到元变量`$MetaVariable`/
      | `$`[MetaVariable]`: `[MacroFragmentSpecifier]
      /如需要进行多次匹配，可以指定分隔符和匹配次数/
      | `$`"("[MacroMatch]"+"")" [MacroRepetitionSeparator]"?" [MacroRepetitionOperator]
      | [MacroMatcher]

      /元变量的命名规则/
      #MetaVariable
      Exclude<[IDENTIFIER] | [KEYWORD], `crate`> | [RAW_IDENTIFIER] | `_`>

        #MacroFragmentSpecifier
        `block` | `expr` | `ident` | `item` | `lifetime` | `literal` | `meta` | `pat`
        | `pat_param` | `path` | `stmt` | `tt` | `ty` | `vis`

        #MacroRepetitionSeparator
        Exclude<[Token], [DELIMITER] | [MacroRepetitionOperator]>

          #MacroRepetitionOperator
          `*` | `+` | `?`

          #DELIMITER
          `(` | `)` | `[` | `]` | `{` | `}`

          #MacroTranscriber
          [DelimTokenTree]

          #DelimTokenTree
          `(`[TokenTree]"*"`)` | `[`[TokenTree]"*"`]` | `{`[TokenTree]"*"`}`

          #TokenTree
          Exclude<[Token], [DELIMITER] | [DelimTokenTree]>
  </div>
  <pre>
#Pattern
  / RFC-1925 /
  `|`"?" [PatternNoTopAlt] "(" `|` [PatternNoTopAlt] ")""*"

#PatternNoTopAlt
    [PatternWithoutRange]
  | [RangePattern]

#RangePattern
     [RangeInclusivePattern]
   | [RangeFromPattern]
   | [RangeToInclusivePattern]
   | [ObsoleteRangePattern]

  #RangeInclusivePattern
        [RangePatternBound] `..=` [RangePatternBound]

  #RangeFromPattern
        [RangePatternBound] `..`

  #RangeToInclusivePattern
        `..=` [RangePatternBound]

  #ObsoleteRangePattern
    [RangePatternBound] `...` [RangePatternBound]

  #RangePatternBound
      [CHAR_LITERAL]                                / 字符 /
    | [BYTE_LITERAL]                                / 字节 /
    | `-`"?" [INTEGER_LITERAL]                      / 整型 /
    | `-`"?" [FLOAT_LITERAL]                        / 浮点数 /
    | [PathExpression]                              / 路径 /

#PatternWithoutRange
    [LiteralPattern]                              / 字面量 /
  | [IdentifierPattern]                           / 标识符 /
  | [WildcardPattern]                             / 通配符 /
  | [RestPattern]                                 / 剩余模式 /
  | [ReferencePattern]                            / 引用 /
  | [StructPattern]                               / 结构 /
  | [TupleStructPattern]                          / 元组结构 /
  | [TuplePattern]                                / 元组 /
  | [GroupedPattern]                              / 分组 /
  | [SlicePattern]                                / 切片 /
  | [PathPattern]                                 / 路径 /
  | [MacroInvocation]                             / 宏调用 /

  #LiteralPattern
      `true` | `false`
    | [CHAR_LITERAL]
    | [BYTE_LITERAL]
    | [STRING_LITERAL]
    | [RAW_STRING_LITERAL]
    | [BYTE_STRING_LITERAL]
    | [RAW_BYTE_STRING_LITERAL]
    | `-`"?" [INTEGER_LITERAL]
    | `-`"?" [FLOAT_LITERAL]

  #IdentifierPattern
    `ref`"?" `mut`"?" [IDENTIFIER] "("`@` [PatternNoTopAlt] ")" "?"

  #WildcardPattern
    `_`

  #RestPattern
    `..`

  #ReferencePattern
    "("`&`|`&&`")" `mut`"?" [PatternWithoutRange]

  #StructPattern
    [PathInExpression] `{`
        [StructPatternElements] "?"
    `}`

    #StructPatternElements
        [StructPatternFields] "("`,` | `,` [StructPatternEtCetera]")""?"
      | [StructPatternEtCetera]

    #StructPatternFields
      [StructPatternField] "("`,` [StructPatternField]")" "*"

    #StructPatternField
      [OuterAttribute] "*"
      "("
            [TUPLE_INDEX] `:` [Pattern]
          | [IDENTIFIER] `:` [Pattern]
          | `ref`"?" `mut`"?" [IDENTIFIER]
      ")"

    #StructPatternEtCetera
      [OuterAttribute] "*"
      `..`
  #TupleStructPattern
    [PathInExpression] `(` [TupleStructItems]"?" `)`

    #TupleStructItems
      [Pattern] "(" `,` [Pattern] ")""*" `,`"?"

  #TuplePattern
    `(` [TuplePatternItems]"?" `)`

    #TuplePatternItems
        [Pattern] `,`
      | [RestPattern]
      | [Pattern] "("`,` [Pattern]")""+" `,`?

  #GroupedPattern
    `(` [Pattern] `)`

  #SlicePattern
    `[` [SlicePatternItems]"?" `]`

    #SlicePatternItems
      [Pattern] "("`,` [Pattern]")""*" `,`"?"

  #PathPattern
    [PathExpression]

</pre>
</body>
<script src="./dist/browser.min.js"></script>
<script>
  pseudoCode(document.body.querySelectorAll('*'))
</script>

</html>
