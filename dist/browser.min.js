(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
const styles=require("./inject.styl"),inject=require("./inject.js"),{parse:parse,generate:generate}=require("./parser.js"),{PSEUDO_CODE:PSEUDO_CODE,INJECT_FLAG:INJECT_FLAG,pseudonymize:pseudonymize}=require("./def"),parsers={};function pseudoCode(e,s={}){if(e.length){let e=document.head.querySelector(`style[${PSEUDO_CODE}]`);e||(e=pseudonymize(document.createElement("style")),document.head.appendChild(e)),e.innerHTML=styles}for(const s of e){const e=parse(s.textContent),n=generate(e);pseudonymize(s),parsers[s[PSEUDO_CODE]]=e,s.innerHTML=n}window[INJECT_FLAG]||(inject({parsers:parsers,options:s}),window[INJECT_FLAG]=!0)}"object"==typeof window?window.pseudoCode=pseudoCode:module.exports=pseudoCode;

},{"./def":2,"./inject.js":3,"./inject.styl":4,"./parser.js":5}],2:[function(require,module,exports){
const TOKEN={ESCAPE:"@",NEWLINE:"\n",DEF:"#",OR:"|",AND:"&",RAW:"'",RAW_END:"'",CODE:"`",CODE_END:"`",STRONG:"*",STRONG_END:"*",MARK:"/",MARK_END:"/",META:'"',META_END:'"',LINK:"[",LINK_END:"]",FUNC:"<",FUNC_END:">",FUNC_PARAM_SEP:",",SEP:" \t\n"},NODE={NEWLINE:"NEWLINE",DEF:"DEF",OR:"OR",AND:"AND",RAW:"RAW",RAW_INFER:"RAW_INFER",RAW_END:"RAW_END",CODE:"CODE",CODE_END:"CODE_END",STRONG:"STRONG",STRONG_END:"STRONG_END",MARK:"MARK",MARK_END:"MARK_END",META:"META",META_END:"META_END",LINK:"LINK",LINK_END:"LINK_END",FUNC:"FUNC",FUNC_NAME:"FUNC_NAME",FUNC_LEFT_EDGE:"FUNC_LEFT_EDGE",FUNC_PARAM:"FUNC_PARAM",FUNC_PARAM_END:"FUNC_PARAM_END",FUNC_PARAM_SEP:"FUNC_PARAM_SEP",FUNC_RIGHT_EDGE:"FUNC_RIGHT_EDGE",FUNC_END:"FUNC_END"},ENTITY_NODE_TOKEN={NEWLINE:!0,OR:!0,AND:!0,RAW_INFER:!0,FUNC:!0,FUNC_END:!0,FUNC_PARAM_SEP:!0},INJECT_FLAG="_INJECT_PSEUDO_CODE_",PSEUDO_CODE="pseudo_code",PSEUDO_TARGET="pseudo_target",PSEUDO="pseudo";function pseudonymize(E){const N=E[PSEUDO_CODE]||E.getAttribute(PSEUDO_CODE)||Math.random().toString(32).slice(2);return E[PSEUDO_CODE]=N,E.setAttribute(PSEUDO_CODE,N),E}function getPseudo(E){return document.querySelector(`[${PSEUDO_CODE}=${E}]`)}function getPseudoId(E){return E[PSEUDO_CODE]||E.getAttribute(PSEUDO_CODE)}module.exports={TOKEN:TOKEN,NODE:NODE,ENTITY_NODE_TOKEN:ENTITY_NODE_TOKEN,PSEUDO_CODE:PSEUDO_CODE,INJECT_FLAG:INJECT_FLAG,PSEUDO_TARGET:PSEUDO_TARGET,PSEUDO:PSEUDO,pseudonymize:pseudonymize,getPseudo:getPseudo,getPseudoId:getPseudoId};

},{}],3:[function(require,module,exports){
const{NODE:NODE,PSEUDO_CODE:PSEUDO_CODE,pseudonymize:pseudonymize,getPseudoId:getPseudoId,getPseudo:getPseudo,PSEUDO_TARGET:PSEUDO_TARGET,PSEUDO:PSEUDO}=require("./def"),{generate:generate}=require("./parser");module.exports=function({parsers:e,options:t}){let o=null;const s=pseudonymize(document.createElement("pre"));function n(e){return"popup"===e.getAttribute(PSEUDO)}function r(e,t){return e.getAttribute(PSEUDO)===t}function u(e,t,o){for(const s of e.querySelectorAll(`[href="${t}"]`))o?s.classList.add("hover"):s.classList.remove("hover")}function i(e,t){if(e&&e instanceof Element){const o=e.closest(`[${PSEUDO_CODE}]`);o&&(o[PSEUDO_CODE]=o.getAttribute(PSEUDO_CODE),t(o,e,r.bind(null,e)))}}s.setAttribute(PSEUDO,"popup"),document.body.appendChild(s),s.style.position="fixed",s.style.display="none",s.style.background="#f6f6f6",s.style.borderRadius="8px",s.style.boxShadow="0 0 10px #d6d6d6",s.style.padding="4px 8px",Object.assign(s.style,t.popupStyles),document.body.addEventListener("mouseover",r=>{r.target&&r.target instanceof Element&&i(r.target,(d,E,l)=>{const c=E.getAttribute("href");(c&&l(NODE.LINK)||l(NODE.DEF))&&(u(d,c,!0),n(d)?u(getPseudo(d.getAttribute(PSEUDO_TARGET)),c,!0):c&&l(NODE.LINK)&&i(t.local?d.querySelector(c):document.body.querySelector(`[${PSEUDO_CODE}] ${c}`),(t,n)=>{const u=e[getPseudoId(t)];if(u){const e=[];for(u.some((t,o)=>{if(t.t===NODE.DEF&&t.s===n.id)e.push(t);else if(e.length){if(t.t===NODE.DEF)return!0;e.push(t)}return!1});e.pop().t!==NODE.NEWLINE;);e.length&&function(e,t,n){clearTimeout(o);const r=t.getBoundingClientRect();s.setAttribute(PSEUDO_TARGET,getPseudoId(e)),s.innerHTML=n,s.style.display="block",s.style.left=r.x+r.width/2+"px",s.style.top=r.y+10+"px"}(t,r.target,generate(e))}}))})}),document.body.addEventListener("mouseout",e=>{if(!(e.target&&e.target instanceof Element))return;const t=e.target.closest(`[${PSEUDO_CODE}]`),i=r(e.target,NODE.LINK),d=r(e.target,NODE.DEF);if(t&&(i||d)){const r=e.target.getAttribute("href");for(const e of t.querySelectorAll(`[href="${r}"]`))e.classList.remove("hover");n(t)&&u(getPseudo(t.getAttribute(PSEUDO_TARGET)),r,!1),o=setTimeout(()=>{s.style.display="none"},300)}})};

},{"./def":2,"./parser":5}],4:[function(require,module,exports){
module.exports="[pseudo_code] {\n  background: ;\n  background: var(--pseudo-bg-color);\n  color: ;\n  color: var();\n  font-size: 14px;\n  line-height: 1.5;\n  white-space: pre;\n  --pseudo-text-color: #171717;\n  --pseudo-bg-color: #f6f6f6;\n  --pseudo-code-color: #ff2386;\n  --pseudo-meta-color: #6e7781;\n  --pseudo-op-color: #6e7781;\n  --pseudo-link-color: #006bff;\n  --pseudo-def-color: #9600dc;\n  --pseudo-fn-color: #007816;\n  --pseudo-mark-color: #6e7781;\n}\n[pseudo_code][pseudo=popup]:hover {\n  display: block !important;\n}\n[pseudo_code],\n[pseudo_code] * {\n  font-family: Fira Code, Operator Mono, Inconsolata, Hack, Droid Sans Mono, DejaVu Sans Mono, Consolas, Liberation Mono, Menlo, monospace;\n}\n[pseudo_code] [pseudo=LINE] {\n  display: block;\n}\n[pseudo_code] [pseudo=CODE] {\n  color: #ff2386;\n  color: var(--pseudo-code-color);\n  font-family: Fira Code, Operator Mono, Inconsolata, Hack, Droid Sans Mono, DejaVu Sans Mono, Consolas, Liberation Mono, Menlo, monospace;\n}\n[pseudo_code] [pseudo=STRONG] {\n  font-weight: bold;\n}\n[pseudo_code] [pseudo=META] {\n  color: #6e7781;\n  color: var(--pseudo-meta-color);\n  font-style: italic;\n}\n[pseudo_code] [pseudo=OR],\n[pseudo_code] [pseudo=AND] {\n  color: #6e7781;\n  color: var(--pseudo-op-color);\n}\n[pseudo_code] [pseudo=LINK] {\n  color: #006bff;\n  color: var(--pseudo-link-color);\n  text-decoration: none;\n  cursor: pointer;\n  transition: 0.3s;\n}\n[pseudo_code] [pseudo=LINK]:hover,\n[pseudo_code] [pseudo=LINK].hover {\n  background-color: #006bff;\n  background-color: var(--pseudo-link-color);\n  color: #fff;\n}\n[pseudo_code] [pseudo=DEF] {\n  color: #9600dc;\n  color: var(--pseudo-def-color);\n  text-decoration: none;\n  cursor: pointer;\n}\n[pseudo_code] [pseudo=DEF]:hover,\n[pseudo_code] [pseudo=DEF].hover {\n  background-color: #9600dc;\n  background-color: var(--pseudo-def-color);\n  color: #fff;\n}\n[pseudo_code] [pseudo=FUNC_NAME],\n[pseudo_code] [pseudo=FUNC_LEFT_EDGE],\n[pseudo_code] [pseudo=FUNC_RIGHT_EDGE],\n[pseudo_code] [pseudo=FUNC_PARAM_SEP] {\n  color: #007816;\n  color: var(--pseudo-fn-color);\n  font-style: italic;\n}\n[pseudo_code] [pseudo=MARK] {\n  color: #6e7781;\n  color: var(--pseudo-mark-color);\n  font-weight: normal;\n  font-style: italic;\n  font-size: 0.8em;\n  opacity: 0.5;\n}\n";

},{}],5:[function(require,module,exports){
const{NODE:NODE,TOKEN:TOKEN,ENTITY_NODE_TOKEN:ENTITY_NODE_TOKEN}=require("./def");function parse(n){let E=-1,N="",e="";const t=[];let i=null,f=null,r=0,O=0;const u=n.length;function D(){return e+=N,N=n[++E],{index:E,token:N}}function o(n){for(;n--;)D()}function s(N){let e=1;const t=function(){let N=E;return function(){return n[++N]}}();for(;t()===N;)e++;return e}function T(n){return(i=f||i)&&i.t===NODE.RAW_INFER&&""===i.s&&t.pop(),f={t:n,s:"",v:i?i.v:0},t.push(f),f}function c(n){_(),n&&T(n),i=f||i,f=null}function K(n){f||T(NODE.RAW_INFER),n===TOKEN.ESCAPE?r+=1:(_(),f.s+=n)}function _(){r>0&&(f.s=TOKEN.ESCAPE.repeat(r),r=0)}function A(){return f||T(NODE.RAW_INFER),O+=Math.floor(r/2),r%2==0?(f.s+=TOKEN.ESCAPE.repeat(r/2),r=0,!1):(f.s+=TOKEN.ESCAPE.repeat(Math.floor(r/2)),r=0,!0)}function l(){for(T(NODE.MARK),O-=1,function(){for(let n=t.length;n--&&!(t[n].t===NODE.NEWLINE||t[n].s.indexOf("\n")>-1);)ENTITY_NODE_TOKEN[t[n].t]||(O+=1);f.s+="&nbsp".repeat(O),f._=O,O=0}();D().index<u;)if(!(a()||M()||W()||d()||C()))if(N===TOKEN.MARK_END){if(!A())return c(NODE.MARK_END),!0;K(N)}else K(N);return!0}function R(){if(N===TOKEN.OR&&!A())return T(NODE.OR),K(N),c(),!0}function p(){if(N===TOKEN.AND&&!A())return T(NODE.AND),K(N),c(),!0}function a(){if(N===TOKEN.NEWLINE)return T(NODE.NEWLINE),c(),e="",!0}function C(){if(N===TOKEN.RAW&&!A())return function(){for(T(NODE.RAW);D().index<u;)if(!a())if(N===TOKEN.RAW_END){if(!A())return c(NODE.RAW_END),!0;K(N)}else K(N);return!0}()}function I(){if(N===TOKEN.DEF){const n=t[t.length-2];if((!f||f.t===NODE.NEWLINE||!n||n.t===NODE.NEWLINE&&""===f.s.trim())&&!A())return function(){for(T(NODE.DEF);D().index<u;)if(!C()){if(TOKEN.SEP.indexOf(N)>-1){if(a())continue;return c(),K(N),!0}K(N)}return!0}()}}function d(){if(N===TOKEN.LINK&&!A())return function(){for(T(NODE.LINK);D().index<u;)if(!C())if(N===TOKEN.LINK_END){if(!A())return c(NODE.LINK_END),!0;K(N)}else K(N);return!0}()}function F(){if(N===TOKEN.META&&!A())return function(){for(T(NODE.META);D().index<u;)if(!(C()||d()||M()||R()||p()))if(N===TOKEN.META_END){if(!A())return c(NODE.META_END),!0;K(N)}else K(N);return!0}()}function M(){if(N===TOKEN.CODE){const n=s(TOKEN.CODE);if(o(n-1),!A())return function(n){for(T(NODE.CODE);D().index<u;)if(N===TOKEN.CODE_END){if(s(TOKEN.CODE_END)>=n)return o(n-1),c(NODE.CODE_END),!0;K(N)}else K(N);return!0}(n)}}function W(){if(N===TOKEN.STRONG&&!A())return function(){for(T(NODE.STRONG);D().index<u;)if(!C())if(N===TOKEN.STRONG_END){if(!A())return c(NODE.STRONG_END),!0;K(N)}else K(N);return!0}()}function L(){if(N===TOKEN.FUNC&&!A())return function(){if(!f||f.t!==NODE.RAW&&f.t!==NODE.RAW_INFER)return;const n=f.s.match(/^(.*?)(\S+)$/);if(n){for(f.s=n[1],T(NODE.FUNC),T(NODE.FUNC_NAME),K(n[2]),T(NODE.FUNC_LEFT_EDGE),K(N),T(NODE.FUNC_PARAM);D().index<u;)if(!(M()||d()||F()||R()||p()||C()))if(N!==TOKEN.FUNC_PARAM_SEP||A())if(N===TOKEN.FUNC_END){if(!A())return c(NODE.FUNC_PARAM_END),T(NODE.FUNC_RIGHT_EDGE),K(N),c(NODE.FUNC_END),!0;K(N)}else K(N);else T(NODE.FUNC_PARAM_END),T(NODE.FUNC_PARAM_SEP),K(N),T(NODE.FUNC_PARAM),c();return!0}}()}function $(){if(N===TOKEN.MARK&&!A())return l()}for(;D().index<u;){if(N===TOKEN.RAW){if(C())continue}else if(N===TOKEN.NEWLINE){if(a())continue}else if(N===TOKEN.DEF){if(I())continue}else if(N===TOKEN.OR){if(R())continue}else if(N===TOKEN.AND){if(p())continue}else if(N===TOKEN.CODE){if(M())continue}else if(N===TOKEN.STRONG){if(W())continue}else if(N===TOKEN.META){if(F())continue}else if(N===TOKEN.MARK){if($())continue}else if(N===TOKEN.LINK){if(d())continue}else if(N===TOKEN.FUNC&&L())continue;K(N)}return t}function generate(n){return n.reduce((E,N,e)=>{if(N.t===NODE.NEWLINE){const N=n[e-1];return E+`${N&&N.t===NODE.NEWLINE?"<br/>":""}</span><span pseudo="LINE">`}return N.t===NODE.LINK?E+`<a pseudo="${N.t}" href="#${N.s}">${N.s}`:N.t===NODE.LINK_END?E+"</a>":N.t===NODE.DEF?E+`<a pseudo="${N.t}" href="#${N.s}" id="${N.s}">${N.s}</a>`:N.t===NODE.MARK?E+`<span pseudo="${N.t}" spaces=${N._}>${N.s}`:N.t.endsWith("_END")?E+"</span>":NODE[N.t+"_END"]?E+`<span pseudo="${N.t}">${N.s}`:E+`<span pseudo="${N.t}">${N.s}</span>`},'<span pseudo="LINE">')+"</span>"}module.exports={parse:parse,generate:generate};

},{"./def":2}]},{},[1]);
