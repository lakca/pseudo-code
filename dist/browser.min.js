(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
const styles=require("./inject.styl"),inject=require("./inject.js"),{parse:parse,generate:generate}=require("./parser.js"),{PSEUDO_CODE:PSEUDO_CODE,INJECT_FLAG:INJECT_FLAG,pseudonymize:pseudonymize}=require("./def"),parsers={};function pseudoCode(e,n={}){if(e.length){let e=document.head.querySelector(`style[${PSEUDO_CODE}]`);e||(e=pseudonymize(document.createElement("style")),document.head.appendChild(e)),e.innerHTML=styles}for(const n of e){const e=parse(n.textContent),s=generate(e);if("PRE"===n.tagName||n.closest("pre"))pseudonymize(n),parsers[n[PSEUDO_CODE]]=e,n.innerHTML=s;else{const r=pseudonymize(document.createElement("pre"));parsers[r[PSEUDO_CODE]]=e,r.innerHTML=s,n.innerHTML=r.outerHTML}}window[INJECT_FLAG]||(inject({parsers:parsers,options:n}),window[INJECT_FLAG]=!0)}"object"==typeof window?window.pseudoCode=pseudoCode:module.exports=pseudoCode;

},{"./def":2,"./inject.js":3,"./inject.styl":4,"./parser.js":5}],2:[function(require,module,exports){
const TOKEN={ESCAPE:"@",NEWLINE:"\n",DEF:"#",OR:"|",AND:"&",RAW:"'",RAW_END:"'",CODE:"`",CODE_END:"`",STRONG:"*",STRONG_END:"*",MARK:"/",MARK_END:"/",META:'"',META_END:'"',LINK:"[",LINK_END:"]",FUNC:"<",FUNC_END:">",FUNC_PARAM_SEP:",",SEP:" \t\n"},NODE={NEWLINE:"NEWLINE",DEF:"DEF",OR:"OR",AND:"AND",RAW:"RAW",RAW_INFER:"RAW_INFER",RAW_END:"RAW_END",CODE:"CODE",CODE_END:"CODE_END",STRONG:"STRONG",STRONG_END:"STRONG_END",MARK:"MARK",MARK_END:"MARK_END",META:"META",META_END:"META_END",LINK:"LINK",LINK_END:"LINK_END",FUNC:"FUNC",FUNC_NAME:"FUNC_NAME",FUNC_LEFT_EDGE:"FUNC_LEFT_EDGE",FUNC_PARAM:"FUNC_PARAM",FUNC_PARAM_END:"FUNC_PARAM_END",FUNC_PARAM_SEP:"FUNC_PARAM_SEP",FUNC_RIGHT_EDGE:"FUNC_RIGHT_EDGE",FUNC_END:"FUNC_END"},ENTITY_NODE_TOKEN={NEWLINE:!0,OR:!0,AND:!0,RAW_INFER:!0,FUNC:!0,FUNC_END:!0,FUNC_PARAM_SEP:!0},PSEUDO_CODE="_PSEUDO_CODE_",INJECT_FLAG="_INJECT_PSEUDO_CODE_";function pseudonymize(E){let N=E[PSEUDO_CODE]||E.getAttribute(PSEUDO_CODE)||Math.random().toString(32).slice(2);return E[PSEUDO_CODE]=N,E.setAttribute(PSEUDO_CODE,N),E}module.exports={TOKEN:TOKEN,NODE:NODE,ENTITY_NODE_TOKEN:ENTITY_NODE_TOKEN,PSEUDO_CODE:PSEUDO_CODE,INJECT_FLAG:INJECT_FLAG,pseudonymize:pseudonymize};

},{}],3:[function(require,module,exports){
const{NODE:NODE,PSEUDO_CODE:PSEUDO_CODE,pseudonymize:pseudonymize}=require("./def"),{generate:generate}=require("./parser");module.exports=function({parsers:e,options:t}){const s=pseudonymize(document.createElement("pre"));function o(e,t){if(e&&e instanceof Element){const s=e.closest(`[${PSEUDO_CODE}]`);s&&(s[PSEUDO_CODE]=s.getAttribute(PSEUDO_CODE),t(s,e,function(t,s){return(s||e).classList.contains(t)}))}}document.body.appendChild(s),s.style.position="fixed",s.style.display="none",s.style.background="#f6f6f6",s.style.borderRadius="8px",s.style.boxShadow="0 0 10px #d6d6d6",Object.assign(s.style,t.popupStyles),document.body.addEventListener("mouseover",n=>{n.target&&n.target instanceof Element&&o(n.target,(r,i,l)=>{const c=i.getAttribute("href");if(c&&l(NODE.LINK)||l(NODE.DEF)){for(const e of r.querySelectorAll(`[href="${c}"]`))e.classList.add("hover");c&&l(NODE.LINK)&&o(t.local?r.querySelector(c):document.body.querySelector(`[${PSEUDO_CODE}] ${c}`),(t,o)=>{if(e[t[PSEUDO_CODE]]){const r=[];for(const s of e[t[PSEUDO_CODE]])if(s.t===NODE.DEF&&s.s===o.id)r.push(s);else if(r.length){if(s.t===NODE.DEF)break;r.push(s)}for(let e=r.length;e--&&(r[e].t===NODE.NEWLINE||r[e].t===NODE.RAW_INFER&&!r[e].s.trim());)r.length-=1;!function(e,t){const o=e.getBoundingClientRect();s.innerHTML=t,s.style.display="block",s.style.left=o.x+o.width+10+"px",s.style.top=o.y+"px"}(n.target,generate(r))}})}})}),document.body.addEventListener("mouseout",e=>{if(!(e.target&&e.target instanceof Element))return;const t=e.target.closest(`[${PSEUDO_CODE}]`),o=e.target.classList.contains(NODE.LINK),n=e.target.classList.contains(NODE.DEF);if(t&&(o||n)){for(const s of t.querySelectorAll('[href="'+e.target.getAttribute("href")+'"]'))s.classList.remove("hover");s.style.display="none"}})};

},{"./def":2,"./parser":5}],4:[function(require,module,exports){
module.exports="[_PSEUDO_CODE_] {\n  --pseudo-bg-color: #f6f6f6;\n  --pseudo-code-color: #ff2386;\n  --pseudo-meta-color: #6e7781;\n  --pseudo-op-color: #6e7781;\n  --pseudo-link-color: #006bff;\n  --pseudo-def-color: #551a8b;\n  --pseudo-fn-color: #551a8b;\n  --pseudo-mark-color: #6e7781;\n  padding: 1em;\n  border-radius: 5px;\n  background: #f6f6f6;\n  background: var(--pseudo-bg-color);\n  font-size: 14px;\n  font-family: Fira Code, Operator Mono, Inconsolata, Hack, Droid Sans Mono, DejaVu Sans Mono, Consolas, Liberation Mono, Menlo, monospace;\n  line-height: 20px;\n}\n[_PSEUDO_CODE_] .CODE {\n  color: #ff2386;\n  color: var(--pseudo-code-color);\n  font-family: Fira Code, Operator Mono, Inconsolata, Hack, Droid Sans Mono, DejaVu Sans Mono, Consolas, Liberation Mono, Menlo, monospace;\n}\n[_PSEUDO_CODE_] .STRONG {\n  font-weight: bold;\n}\n[_PSEUDO_CODE_] .META {\n  color: #6e7781;\n  color: var(--pseudo-meta-color);\n  font-style: italic;\n}\n[_PSEUDO_CODE_] .OR,\n[_PSEUDO_CODE_] .AND {\n  color: #6e7781;\n  color: var(--pseudo-op-color);\n}\n[_PSEUDO_CODE_] .LINK {\n  color: #006bff;\n  color: var(--pseudo-link-color);\n  text-decoration: none;\n  cursor: pointer;\n  transition: 0.3s;\n}\n[_PSEUDO_CODE_] .LINK:hover,\n[_PSEUDO_CODE_] .LINK.hover {\n  background-color: #006bff;\n  background-color: var(--pseudo-link-color);\n  color: #fff;\n}\n[_PSEUDO_CODE_] .DEF {\n  color: #551a8b;\n  color: var(--pseudo-def-color);\n  text-decoration: none;\n  cursor: pointer;\n}\n[_PSEUDO_CODE_] .DEF:hover,\n[_PSEUDO_CODE_] .DEF.hover {\n  background-color: #551a8b;\n  background-color: var(--pseudo-def-color);\n  color: #fff;\n}\n[_PSEUDO_CODE_] .FUNC_NAME {\n  color: #551a8b;\n  color: var(--pseudo-fn-color);\n  font-style: italic;\n}\n[_PSEUDO_CODE_] .MARK {\n  color: #6e7781;\n  color: var(--pseudo-mark-color);\n  font-weight: normal;\n  font-style: italic;\n  font-size: 0.8em;\n  opacity: 0.5;\n}\n";

},{}],5:[function(require,module,exports){
const{NODE:NODE,TOKEN:TOKEN,ENTITY_NODE_TOKEN:ENTITY_NODE_TOKEN}=require("./def");function parse(E){let N=-1,n="",e="",i=[],t=null,f=null,O=0,r=0;const u=E.length;function D(){return e+=n,n=E[++N],{index:N,token:n}}function s(E){return f={s:"",t:E,v:(t=f||t)?t.v:0},i.push(f),f}function o(E){E&&s(E),t=f||t,f=null}function T(E){f||s(NODE.RAW_INFER),E===TOKEN.ESCAPE?O+=1:(f.s+=TOKEN.ESCAPE.repeat(O),O=0,f.s+=E)}function K(){return f||s(NODE.RAW_INFER),r+=Math.floor(O/2),O%2==0?(f.s+=TOKEN.ESCAPE.repeat(O/2),O=0,!1):(f.s+=TOKEN.ESCAPE.repeat(Math.floor(O/2)),O=0,!0)}function c(){for(s(NODE.MARK),function(){for(let E=i.length;E--&&!(i[E].t===NODE.NEWLINE||i[E].s.indexOf("\n")>-1);)ENTITY_NODE_TOKEN[i[E].t]||(r+=1);f.s+="&nbsp".repeat(r),f._=r,r=0}();D().index<u;)if(!(l()||I()||M()||C()))if(n===TOKEN.MARK_END){if(!K())return o(NODE.MARK_END),!0;T(n)}else T(n);return!0}function _(){if(n===TOKEN.OR&&!K())return s(NODE.OR),T(n),o(),!0}function A(){if(n===TOKEN.AND&&!K())return s(NODE.AND),T(n),o(),!0}function l(){if(n===TOKEN.NEWLINE)return s(NODE.NEWLINE),o(),e="",!0}function R(){if(n===TOKEN.RAW&&!K())return function(){for(s(NODE.RAW);D().index<u;)if(!l())if(n===TOKEN.RAW_END){if(!K())return o(NODE.RAW_END),!0;T(n)}else T(n);return!0}()}function a(){if(n===TOKEN.DEF){const E=i[i.length-2];if((!f||f.t===NODE.NEWLINE||!E||E.t===NODE.NEWLINE&&""===f.s.trim())&&!K())return function(){for(s(NODE.DEF);D().index<u;)if(!R()){if(TOKEN.SEP.indexOf(n)>-1){if(l())continue;return o(),T(n),!0}T(n)}return!0}()}}function C(){if(n===TOKEN.LINK&&!K())return function(){for(s(NODE.LINK);D().index<u;)if(!R()&&!I())if(n===TOKEN.LINK_END){if(!K())return o(NODE.LINK_END),!0;T(n)}else T(n);return!0}()}function F(){if(n===TOKEN.META&&!K())return function(){for(s(NODE.META);D().index<u;)if(!(R()||C()||I()||_()||A()))if(n===TOKEN.META_END){if(!K())return o(NODE.META_END),!0;T(n)}else T(n);return!0}()}function I(){if(n===TOKEN.CODE&&!K())return function(){for(s(NODE.CODE);D().index<u;)if(n===TOKEN.CODE_END){if(!K())return o(NODE.CODE_END),!0;T(n)}else T(n);return!0}()}function M(){if(n===TOKEN.STRONG&&!K())return function(){for(s(NODE.STRONG);D().index<u;)if(n===TOKEN.STRONG_END){if(!K())return o(NODE.STRONG_END),!0;T(n)}else T(n);return!0}()}function d(){if(n===TOKEN.FUNC&&!K())return function(){if(!f||f.t!==NODE.RAW)return;const E=f.s.match(/^(.*?)(\S+)$/);if(E){for(f.s=E[1],s(NODE.FUNC),s(NODE.FUNC_NAME),T(E[2]),s(NODE.FUNC_LEFT_EDGE),T(n),s(NODE.FUNC_PARAM);D().index<u;)if(!(I()||C()||F()||_()||A()||R()))if(n!==TOKEN.FUNC_PARAM_SEP||K())if(n===TOKEN.FUNC_END){if(!K())return o(NODE.FUNC_PARAM_END),o(NODE.FUNC_RIGHT_EDGE),T(n),o(NODE.FUNC_END),!0;T(n)}else T(n);else s(NODE.FUNC_PARAM_END),s(NODE.FUNC_PARAM_SEP),T(n),s(NODE.FUNC_PARAM),o();return!0}}()}function p(){if(n===TOKEN.MARK&&!K())return c()}for(;D().index<u;){if(n===TOKEN.RAW){if(R())continue}else if(n===TOKEN.NEWLINE){if(l())continue}else if(n===TOKEN.DEF){if(a())continue}else if(n===TOKEN.OR){if(_())continue}else if(n===TOKEN.AND){if(A())continue}else if(n===TOKEN.CODE){if(I())continue}else if(n===TOKEN.STRONG){if(M())continue}else if(n===TOKEN.META){if(F())continue}else if(n===TOKEN.MARK){if(p())continue}else if(n===TOKEN.LINK){if(C())continue}else if(n===TOKEN.FUNC&&d())continue;T(n)}return i}function generate(E){return E.reduce((E,N)=>N.t===NODE.NEWLINE?E+"<br/>":N.t===NODE.LINK?E+`<a class="${N.t}" href="#${N.s}">${N.s}`:N.t===NODE.LINK_END?E+"</a>":N.t===NODE.DEF?E+`<a class="${N.t}" href="#${N.s}" id="${N.s}">${N.s}</a>`:N.t===NODE.MARK?E+`<span class="${N.t}" spaces=${N._}>${N.s}`:N.t.endsWith("_END")?E+"</span>":NODE[N.t+"_END"]?E+`<span class="${N.t}">${N.s}`:E+`<span class="${N.t}">${N.s}</span>`,"")}module.exports={parse:parse,generate:generate};

},{"./def":2}]},{},[1]);
