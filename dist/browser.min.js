(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
const styles=require("./inject.styl"),inject=require("./inject.js"),{parse:parse,generate:generate}=require("./parser.js");function pseudoCode(e){if(e.length){let e=document.head.querySelector('style[bound-for="PSEUDO-CODE"]');e||(e=document.createElement("style"),document.head.appendChild(e)),e.innerHTML=styles}for(const n of e)n.innerHTML=generate(parse(n.innerText));window._INJECT_PSEUDO_CODE_||(inject(),window._INJECT_PSEUDO_CODE_=!0)}"object"==typeof window?window.pseudoCode=pseudoCode:module.exports=pseudoCode;

},{"./inject.js":3,"./inject.styl":4,"./parser.js":5}],2:[function(require,module,exports){
const SEQ={DEF:0},TOKEN={ESCAPE:"@",NEWLINE:"\n",DEF:"#",OR:"|",AND:"&",RAW:"'",RAW_END:"'",CODE:"`",CODE_END:"`",STRONG:"*",STRONG_END:"*",MARK:"/",MARK_END:"/",META:'"',META_END:'"',LINK:"[",LINK_END:"]",FUNC:"<",FUNC_END:">",FUNC_PARAM_SEP:",",SEP:" \t\n"},ENTITY_TOKEN={NEWLINE:!0,OR:!0,AND:!0,FUNC:!0,FUNC_END:!0,FUNC_PARAM_SEP:!0},NODE={NEWLINE:"NEWLINE",DEF:"DEF",OR:"OR",RAW:"RAW",CODE:"CODE",CODE_END:"CODE_END",STRONG:"STRONG",STRONG_END:"STRONG_END",META:"META",META_END:"META_END",LINK:"LINK",LINK_END:"LINK_END",FUNC:"FUNC",FUNC_NAME:"FUNC_NAME",FUNC_LEFT_EDGE:"FUNC_LEFT_EDGE",FUNC_PARAM:"FUNC_PARAM",FUNC_PARAM_END:"FUNC_PARAM_END",FUNC_PARAM_SEP:"FUNC_PARAM_SEP",FUNC_RIGHT_EDGE:"FUNC_RIGHT_EDGE",FUNC_END:"FUNC_END",MARK:"MARK",MARK_END:"MARK_END"};module.exports={SEQ:SEQ,TOKEN:TOKEN,NODE:NODE,ENTITY_TOKEN:ENTITY_TOKEN};

},{}],3:[function(require,module,exports){
const{NODE:NODE}=require("./def");module.exports=function(){document.body.addEventListener("mouseover",t=>{if(t.target.classList.contains(NODE.LINK)||t.target.classList.contains(NODE.DEF))for(const e of t.target.closest(".PSEUDO-CODE").querySelectorAll('[href="'+t.target.getAttribute("href")+'"]'))e.classList.add("hover")}),document.body.addEventListener("mouseout",t=>{if(t.target.classList.contains(NODE.LINK)||t.target.classList.contains(NODE.DEF))for(const e of t.target.closest(".PSEUDO-CODE").querySelectorAll('[href="'+t.target.getAttribute("href")+'"]'))e.classList.remove("hover")})};

},{"./def":2}],4:[function(require,module,exports){
module.exports=".PSEUDO-CODE {\n  --pseudo-bg-color: #f6f6f6;\n  --pseudo-code-color: #ff2386;\n  --pseudo-meta-color: #6e7781;\n  --pseudo-op-color: #6e7781;\n  --pseudo-link-color: #006bff;\n  --pseudo-def-color: #551a8b;\n  --pseudo-fn-color: #551a8b;\n  --pseudo-mark-color: #6e7781;\n  padding: 1em;\n  border-radius: 5px;\n  background: #f6f6f6;\n  background: var(--pseudo-bg-color);\n  font-size: 14px;\n  font-family: Fira Code, Operator Mono, Inconsolata, Hack, Droid Sans Mono, DejaVu Sans Mono, Consolas, Liberation Mono, Menlo, monospace;\n  line-height: 20px;\n}\n.PSEUDO-CODE .CODE {\n  color: #ff2386;\n  color: var(--pseudo-code-color);\n  font-family: Fira Code, Operator Mono, Inconsolata, Hack, Droid Sans Mono, DejaVu Sans Mono, Consolas, Liberation Mono, Menlo, monospace;\n}\n.PSEUDO-CODE .STRONG {\n  font-weight: bold;\n}\n.PSEUDO-CODE .META {\n  color: #6e7781;\n  color: var(--pseudo-meta-color);\n  font-style: italic;\n}\n.PSEUDO-CODE .OR,\n.PSEUDO-CODE .AND {\n  color: #6e7781;\n  color: var(--pseudo-op-color);\n}\n.PSEUDO-CODE .LINK {\n  color: #006bff;\n  color: var(--pseudo-link-color);\n  text-decoration: none;\n  cursor: pointer;\n  transition: 0.3s;\n}\n.PSEUDO-CODE .LINK:hover,\n.PSEUDO-CODE .LINK.hover {\n  background-color: #006bff;\n  background-color: var(--pseudo-link-color);\n  color: #fff;\n}\n.PSEUDO-CODE .DEF {\n  color: #551a8b;\n  color: var(--pseudo-def-color);\n  text-decoration: none;\n  cursor: pointer;\n}\n.PSEUDO-CODE .DEF:hover,\n.PSEUDO-CODE .DEF.hover {\n  background-color: #551a8b;\n  background-color: var(--pseudo-def-color);\n  color: #fff;\n}\n.PSEUDO-CODE .FUNC_NAME {\n  color: #551a8b;\n  color: var(--pseudo-fn-color);\n  font-style: italic;\n}\n.PSEUDO-CODE .MARK {\n  color: #6e7781;\n  color: var(--pseudo-mark-color);\n  font-weight: normal;\n  font-style: italic;\n  font-size: 0.8em;\n  opacity: 0.5;\n}\n";

},{}],5:[function(require,module,exports){
const{NODE:NODE,TOKEN:TOKEN,SEQ:SEQ}=require("./def");function parse(n){let E=-1,N="",e="",i=[],t=null,f=null,r=0;const O=n.length;function u(){return e+=N,N=n[++E],{index:E,token:N}}function D(n){return f={s:"",t:n,v:(t=f||t)?t.v:0},i.push(f),f}function o(n){n&&D(n),t=f||t,f=null}function s(n){f||D(NODE.RAW),n===TOKEN.ESCAPE?r+=1:(f.s+=TOKEN.ESCAPE.repeat(r),r=0,f.s+=n)}function c(){return f||D(NODE.RAW),r%2==0?(f.s+=TOKEN.ESCAPE.repeat(r/2),r=0,!1):(f.s+=TOKEN.ESCAPE.repeat(Math.floor(r/2)),r=0,!0)}function K(){if(N===TOKEN.OR&&!c())return D(NODE.OR),s(N),o(),!0}function T(){if(N===TOKEN.AND&&!c())return D(NODE.AND),s(N),o(),!0}function l(){if(N===TOKEN.NEWLINE)return D(NODE.NEWLINE),o(),e="",!0}function A(){if(N===TOKEN.RAW&&!c())return function(){for(D(NODE.RAW);u().index<O;)if(!l())if(N===TOKEN.RAW_END){if(!c())return o(),!0;s(N)}else s(N);return!0}()}function _(){if(N===TOKEN.DEF){const n=i[i.length-2];if((!f||f.t===NODE.NEWLINE||!n||n.t===NODE.NEWLINE&&""===f.s.trim())&&!c())return function(){for(D(NODE.DEF);u().index<O;)if(!A()){if(TOKEN.SEP.indexOf(N)>-1){if(l())continue;return D(NODE.RAW),s(N),!0}s(N)}return!0}()}}function R(){if(N===TOKEN.LINK&&!c())return function(){for(D(NODE.LINK);u().index<O;)if(!A()&&!C())if(N===TOKEN.LINK_END){if(!c())return o(NODE.LINK_END),!0;s(N)}else s(N);return!0}()}function a(){if(N===TOKEN.META&&!c())return function(){for(D(NODE.META);u().index<O;)if(!(A()||R()||C()||K()||T()))if(N===TOKEN.META_END){if(!c())return o(NODE.META_END),!0;s(N)}else s(N);return!0}()}function C(){if(N===TOKEN.CODE&&!c())return function(){for(D(NODE.CODE);u().index<O;)if(N===TOKEN.CODE_END){if(!c())return o(NODE.CODE_END),!0;s(N)}else s(N);return!0}()}function F(){if(N===TOKEN.STRONG&&!c())return function(){for(D(NODE.STRONG);u().index<O;)if(N===TOKEN.STRONG_END){if(!c())return o(NODE.STRONG_END),!0;s(N)}else s(N);return!0}()}function M(){if(N===TOKEN.FUNC&&!c())return function(){if(!f||f.t!==NODE.RAW)return;const n=f.s.match(/^(.*?)(\S+)$/);if(n){for(f.s=n[1],D(NODE.FUNC),D(NODE.FUNC_NAME),s(n[2]),D(NODE.FUNC_LEFT_EDGE),s(N),D(NODE.FUNC_PARAM);u().index<O;)if(!(C()||R()||a()||K()||T()||A()))if(N!==TOKEN.FUNC_PARAM_SEP||c())if(N===TOKEN.FUNC_END){if(!c())return o(NODE.FUNC_PARAM_END),o(NODE.FUNC_RIGHT_EDGE),s(N),o(NODE.FUNC_END),!0;s(N)}else s(N);else D(NODE.FUNC_PARAM_END),D(NODE.FUNC_PARAM_SEP),s(N),D(NODE.FUNC_PARAM),o();return!0}}()}function S(){if(N===TOKEN.MARK&&!c())return function(){for(D(NODE.MARK);u().index<O;)if(!l()&&!C())if(N===TOKEN.MARK_END){if(!c())return o(NODE.MARK_END),!0;s(N)}else s(N);return!0}()}try{for(;u().index<O;){if(N===TOKEN.RAW){if(A())continue}else if(N===TOKEN.NEWLINE){if(l())continue}else if(N===TOKEN.DEF){if(_())continue}else if(N===TOKEN.OR){if(K())continue}else if(N===TOKEN.AND){if(T())continue}else if(N===TOKEN.CODE){if(C())continue}else if(N===TOKEN.STRONG){if(F())continue}else if(N===TOKEN.META){if(a())continue}else if(N===TOKEN.MARK){if(S())continue}else if(N===TOKEN.LINK){if(R())continue}else if(N===TOKEN.FUNC&&M())continue;s(N)}}catch(n){throw console.log(JSON.stringify(i,null,2)),n}return i}function generate(n){return'<pre class="PSEUDO-CODE">'+n.reduce((n,E)=>E.t===NODE.NEWLINE?n+"<br/>":E.t===NODE.LINK?n+`<a class="${E.t}" href="#${E.s}">${E.s}`:E.t===NODE.LINK_END?n+"</a>":E.t===NODE.DEF?n+`<a class="${E.t}" href="#${E.s}" id="${E.s}">${E.s}</a>`:E.t.endsWith("_END")?n+"</span>":NODE[E.t+"_END"]?n+`<span class="${E.t}">${E.s}`:n+`<span class="${E.t}">${E.s}</span>`,"")+"</pre>"}module.exports={parse:parse,generate:generate};

},{"./def":2}]},{},[1]);
